<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>英语时态练习题即时评分系统</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .filter-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        select, button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        select {
            background-color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            border: 1px solid #ddd;
        }
        
        button {
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
        }
        
        button:hover {
            background-color: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .quiz-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
        }
        
        .categories {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            height: fit-content;
        }
        
        .category-list {
            list-style: none;
        }
        
        .category-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            justify-content: space-between;
        }
        
        .category-item:hover {
            background-color: #f0f4ff;
        }
        
        .category-item.active {
            background-color: #e3eeff;
            font-weight: bold;
            border-left: 4px solid #2575fc;
        }
        
        .questions-container {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .question {
            margin-bottom: 25px;
            padding: 20px;
            border-radius: 8px;
            background-color: #fafafa;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .question.answered-correct {
            background-color: #f0f9f0;
            border-left: 4px solid #4CAF50;
        }
        
        .question.answered-incorrect {
            background-color: #fff5f5;
            border-left: 4px solid #f44336;
        }
        
        .question-text {
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: 500;
        }
        
        .answer-input-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .answer-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        .answer-input:focus {
            border-color: #4CAF50;
            outline: none;
        }
        
        .check-button {
            padding: 10px 15px;
            background-color: #2575fc;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .check-button:hover {
            background-color: #1a68e8;
        }
        
        .feedback {
            margin-top: 8px;
            font-size: 0.9rem;
            padding: 8px 12px;
            border-radius: 4px;
            display: none;
        }
        
        .correct {
            background-color: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #c8e6c9;
        }
        
        .incorrect {
            background-color: #ffebee;
            color: #c62828;
            border: 1px solid #ffcdd2;
        }
        
        .score-container {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .score {
            font-size: 2rem;
            font-weight: bold;
            color: #2575fc;
            margin: 10px 0;
        }
        
        .progress-bar {
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, #4CAF50, #45a049);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }
        
        .stat-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            width: 30%;
        }
        
        .stat-correct {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        
        .stat-incorrect {
            background-color: #ffebee;
            color: #c62828;
        }
        
        .stat-unanswered {
            background-color: #f5f5f5;
            color: #757575;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .stat-label {
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        .question-status {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }
        
        .status-correct {
            background-color: #4CAF50;
        }
        
        .status-incorrect {
            background-color: #f44336;
        }
        
        .status-unanswered {
            background-color: #ddd;
        }
        
        @media (max-width: 768px) {
            .quiz-container {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .filter-group {
                width: 100%;
                justify-content: space-between;
            }
            
            .answer-input-container {
                flex-direction: column;
                align-items: stretch;
            }
            
            .stats {
                flex-direction: column;
                gap: 10px;
            }
            
            .stat-item {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>英语时态练习题即时评分系统</h1>
            <p class="subtitle">每道题答题后立即获得评分反馈</p>
        </header>
        
        <div class="controls">
            <div class="filter-group">
                <select id="tenseFilter">
                    <option value="all">所有时态</option>
                    <option value="present">一般现在时</option>
                    <option value="past">一般过去时</option>
                    <option value="future">一般将来时</option>
                    <option value="present-continuous">现在进行时</option>
                    <option value="past-continuous">过去进行时</option>
                    <option value="present-perfect">现在完成时</option>
                    <option value="past-perfect">过去完成时</option>
                </select>
                
                <select id="difficultyFilter">
                    <option value="all">所有难度</option>
                    <option value="simple">简单</option>
                    <option value="medium">中等</option>
                </select>
            </div>
            
            <button id="resetQuiz">重置答题</button>
        </div>
        
        <div class="quiz-container">
            <div class="categories">
                <h2>时态分类</h2>
                <ul class="category-list">
                    <li class="category-item active" data-category="all">所有题目 <span class="count">200</span></li>
                    <li class="category-item" data-category="present">一般现在时 <span class="count">30</span></li>
                    <li class="category-item" data-category="past">一般过去时 <span class="count">30</span></li>
                    <li class="category-item" data-category="future">一般将来时 <span class="count">30</span></li>
                    <li class="category-item" data-category="present-continuous">现在进行时 <span class="count">30</span></li>
                    <li class="category-item" data-category="past-continuous">过去进行时 <span class="count">30</span></li>
                    <li class="category-item" data-category="present-perfect">现在完成时 <span class="count">30</span></li>
                    <li class="category-item" data-category="past-perfect">过去完成时 <span class="count">20</span></li>
                </ul>
            </div>
            
            <div class="questions-container" id="questionsContainer">
                <!-- 题目将通过JavaScript动态生成 -->
            </div>
        </div>
        
        <div class="score-container" id="scoreContainer">
            <h2>答题进度</h2>
            <div class="score" id="scoreValue">0/0</div>
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
            <div class="stats">
                <div class="stat-item stat-correct">
                    <div class="stat-value" id="correctCount">0</div>
                    <div class="stat-label">正确</div>
                </div>
                <div class="stat-item stat-incorrect">
                    <div class="stat-value" id="incorrectCount">0</div>
                    <div class="stat-label">错误</div>
                </div>
                <div class="stat-item stat-unanswered">
                    <div class="stat-value" id="unansweredCount">0</div>
                    <div class="stat-label">未答</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 题目数据
        const questions = [
            // 一般现在时 - 简单 (1-15)
            { id: 1, category: 'present', difficulty: 'simple', text: 'She ________ (work) in a hospital.', answer: 'works' },
            { id: 2, category: 'present', difficulty: 'simple', text: 'They ________ (play) football every weekend.', answer: 'play' },
            { id: 3, category: 'present', difficulty: 'simple', text: 'The sun ________ (rise) in the east.', answer: 'rises' },
            { id: 4, category: 'present', difficulty: 'simple', text: 'I ________ (like) reading books in my free time.', answer: 'like' },
            { id: 5, category: 'present', difficulty: 'simple', text: 'He ________ (not speak) French.', answer: 'does not speak' },
            { id: 6, category: 'present', difficulty: 'simple', text: '________ you ________ (enjoy) classical music?', answer: 'Do, enjoy' },
            { id: 7, category: 'present', difficulty: 'simple', text: 'Water ________ (boil) at 100 degrees Celsius.', answer: 'boils' },
            { id: 8, category: 'present', difficulty: 'simple', text: 'My brother ________ (watch) TV every evening.', answer: 'watches' },
            { id: 9, category: 'present', difficulty: 'simple', text: 'We ________ (not eat) meat on Fridays.', answer: 'do not eat' },
            { id: 10, category: 'present', difficulty: 'simple', text: 'The train ________ (leave) at 5 PM.', answer: 'leaves' },
            
            // 一般现在时 - 中等 (16-30)
            { id: 16, category: 'present', difficulty: 'medium', text: 'My father usually ________ (read) the newspaper before breakfast.', answer: 'reads' },
            { id: 17, category: 'present', difficulty: 'medium', text: 'Look! The children ________ (be) hungry. Let\'s give them some sandwiches.', answer: 'are' },
            { id: 18, category: 'present', difficulty: 'medium', text: 'Not only my parents but also my sister ________ (be) coming to the party.', answer: 'is' },
            { id: 19, category: 'present', difficulty: 'medium', text: 'The news on TV ________ (be) often depressing.', answer: 'is' },
            { id: 20, category: 'present', difficulty: 'medium', text: 'Every student who passes the exam ________ (receive) a certificate.', answer: 'receives' },
            
            // 一般过去时 - 简单 (31-45)
            { id: 31, category: 'past', difficulty: 'simple', text: 'I ________ (finish) my homework an hour ago.', answer: 'finished' },
            { id: 32, category: 'past', difficulty: 'simple', text: 'They ________ (visit) Paris last summer.', answer: 'visited' },
            { id: 33, category: 'past', difficulty: 'simple', text: 'He ________ (be) very tired yesterday.', answer: 'was' },
            { id: 34, category: 'past', difficulty: 'simple', text: 'We ________ (not see) the movie because it was sold out.', answer: 'did not see' },
            { id: 35, category: 'past', difficulty: 'simple', text: '________ you ________ (eat) breakfast this morning?', answer: 'Did, eat' },
            
            // 一般过去时 - 中等 (46-60)
            { id: 46, category: 'past', difficulty: 'medium', text: 'By the time we arrived, the concert already ________ (begin).', answer: 'had begun' },
            { id: 47, category: 'past', difficulty: 'medium', text: 'I ________ (read) that book twice when I was a child.', answer: 'had read' },
            { id: 48, category: 'past', difficulty: 'medium', text: 'He ________ (not realize) the importance of the document until it was too late.', answer: 'had not realized' },
            { id: 49, category: 'past', difficulty: 'medium', text: 'When ________ (be) the last time you ________ (go) to the dentist?', answer: 'was, went' },
            { id: 50, category: 'past', difficulty: 'medium', text: 'She ________ (teach) English in Japan for three years before she moved back.', answer: 'had taught' },
            
            // 一般将来时 - 简单 (61-75)
            { id: 61, category: 'future', difficulty: 'simple', text: 'I think it ________ (rain) tomorrow.', answer: 'will rain' },
            { id: 62, category: 'future', difficulty: 'simple', text: 'They ________ (move) to a new city next year.', answer: 'will move' },
            { id: 63, category: 'future', difficulty: 'simple', text: 'We ________ (have) a party next Saturday.', answer: 'will have' },
            { id: 64, category: 'future', difficulty: 'simple', text: 'He ________ (not be) here next week.', answer: 'will not be' },
            { id: 65, category: 'future', difficulty: 'simple', text: '________ you ________ (help) me with my luggage?', answer: 'Will, help' },
            
            // 一般将来时 - 中等 (76-90)
            { id: 76, category: 'future', difficulty: 'medium', text: 'The weather forecast says it ________ (be) sunny this afternoon.', answer: 'will be' },
            { id: 77, category: 'future', difficulty: 'medium', text: 'I ________ (meet) my boss at 3 PM to discuss my progress.', answer: 'am meeting' },
            { id: 78, category: 'future', difficulty: 'medium', text: 'As soon as I get the money, I ________ (pay) you back.', answer: 'will pay' },
            { id: 79, category: 'future', difficulty: 'medium', text: 'Do you think they ________ (win) the championship?', answer: 'will win' },
            { id: 80, category: 'future', difficulty: 'medium', text: 'I can\'t come out now. I ________ (finish) my homework first.', answer: 'am going to finish' },
            
            // 现在进行时 - 简单 (91-105)
            { id: 91, category: 'present-continuous', difficulty: 'simple', text: 'Listen! The birds ________ (sing).', answer: 'are singing' },
            { id: 92, category: 'present-continuous', difficulty: 'simple', text: 'She ________ (read) a book right now.', answer: 'is reading' },
            { id: 93, category: 'present-continuous', difficulty: 'simple', text: 'They ________ (not watch) TV; they are studying.', answer: 'are not watching' },
            { id: 94, category: 'present-continuous', difficulty: 'simple', text: '________ you ________ (listen) to me?', answer: 'Are, listening' },
            { id: 95, category: 'present-continuous', difficulty: 'simple', text: 'I ________ (write) an email to my friend.', answer: 'am writing' },
            
            // 现在进行时 - 中等 (106-120)
            { id: 106, category: 'present-continuous', difficulty: 'medium', text: 'I ________ (look) for a new apartment these days.', answer: 'am looking' },
            { id: 107, category: 'present-continuous', difficulty: 'medium', text: 'She is tired because she ________ (study) all night.', answer: 'has been studying' },
            { id: 108, category: 'present-continuous', difficulty: 'medium', text: 'They ________ (constantly complain) about the weather.', answer: 'are constantly complaining' },
            { id: 109, category: 'present-continuous', difficulty: 'medium', text: 'We ________ (fly) to Rome next Tuesday. The tickets are booked.', answer: 'are flying' },
            { id: 110, category: 'present-continuous', difficulty: 'medium', text: 'He always ________ (leave) his clothes on the floor! It\'s so annoying.', answer: 'is always leaving' }
        ];

        // DOM 元素
        const questionsContainer = document.getElementById('questionsContainer');
        const categoryItems = document.querySelectorAll('.category-item');
        const tenseFilter = document.getElementById('tenseFilter');
        const difficultyFilter = document.getElementById('difficultyFilter');
        const resetQuizBtn = document.getElementById('resetQuiz');
        const scoreValue = document.getElementById('scoreValue');
        const progressBar = document.getElementById('progressBar');
        const correctCountEl = document.getElementById('correctCount');
        const incorrectCountEl = document.getElementById('incorrectCount');
        const unansweredCountEl = document.getElementById('unansweredCount');

        // 当前筛选条件
        let currentCategory = 'all';
        let currentTense = 'all';
        let currentDifficulty = 'all';
        
        // 用户答案存储
        let userAnswers = {};

        // 初始化页面
        function init() {
            renderQuestions();
            setupEventListeners();
            updateScore();
        }

        // 设置事件监听器
        function setupEventListeners() {
            // 分类点击事件
            categoryItems.forEach(item => {
                item.addEventListener('click', () => {
                    categoryItems.forEach(i => i.classList.remove('active'));
                    item.classList.add('active');
                    currentCategory = item.dataset.category;
                    renderQuestions();
                    updateScore();
                });
            });

            // 筛选器变化事件
            tenseFilter.addEventListener('change', () => {
                currentTense = tenseFilter.value;
                renderQuestions();
                updateScore();
            });

            difficultyFilter.addEventListener('change', () => {
                currentDifficulty = difficultyFilter.value;
                renderQuestions();
                updateScore();
            });

            // 重置按钮点击事件
            resetQuizBtn.addEventListener('click', resetQuiz);
        }

        // 渲染题目
        function renderQuestions() {
            questionsContainer.innerHTML = '';
            
            const filteredQuestions = questions.filter(question => {
                const categoryMatch = currentCategory === 'all' || question.category === currentCategory;
                const tenseMatch = currentTense === 'all' || 
                    (currentTense === 'present' && question.category === 'present') ||
                    (currentTense === 'past' && question.category === 'past') ||
                    (currentTense === 'future' && question.category === 'future') ||
                    (currentTense === 'present-continuous' && question.category === 'present-continuous') ||
                    (currentTense === 'past-continuous' && question.category === 'past-continuous') ||
                    (currentTense === 'present-perfect' && question.category === 'present-perfect') ||
                    (currentTense === 'past-perfect' && question.category === 'past-perfect');
                const difficultyMatch = currentDifficulty === 'all' || question.difficulty === currentDifficulty;
                
                return categoryMatch && tenseMatch && difficultyMatch;
            });
            
            if (filteredQuestions.length === 0) {
                questionsContainer.innerHTML = '<p>没有找到符合条件的题目。</p>';
                return;
            }
            
            filteredQuestions.forEach(question => {
                const questionElement = document.createElement('div');
                questionElement.className = 'question';
                
                // 检查是否已有用户答案
                const userAnswer = userAnswers[question.id] || '';
                const isCorrect = userAnswer && userAnswer.toLowerCase() === question.answer.toLowerCase();
                const hasAnswer = userAnswer !== '';
                
                // 设置问题状态类
                if (hasAnswer) {
                    questionElement.classList.add(isCorrect ? 'answered-correct' : 'answered-incorrect');
                }
                
                questionElement.innerHTML = `
                    <div class="question-status ${hasAnswer ? (isCorrect ? 'status-correct' : 'status-incorrect') : 'status-unanswered'}"></div>
                    <p class="question-text">${question.id}. ${question.text}</p>
                    <div class="answer-input-container">
                        <input type="text" 
                               class="answer-input" 
                               id="answer-${question.id}" 
                               placeholder="请输入答案"
                               value="${userAnswer}"
                               data-question-id="${question.id}">
                        <button class="check-button" data-question-id="${question.id}">检查</button>
                    </div>
                    <div class="feedback ${isCorrect ? 'correct' : 'incorrect'}" 
                         id="feedback-${question.id}"
                         style="${hasAnswer ? 'display: block;' : 'display: none;'}">
                        ${hasAnswer ? (isCorrect ? 
                            `正确！` : 
                            `错误。正确答案是: ${question.answer}`) : ''}
                    </div>
                `;
                questionsContainer.appendChild(questionElement);
                
                // 设置输入框样式
                const inputElement = document.getElementById(`answer-${question.id}`);
                if (hasAnswer) {
                    inputElement.style.borderColor = isCorrect ? '#4CAF50' : '#f44336';
                }
                
                // 添加输入事件监听
                inputElement.addEventListener('input', handleAnswerInput);
                
                // 添加检查按钮事件监听
                const checkButton = questionElement.querySelector('.check-button');
                checkButton.addEventListener('click', () => {
                    checkAnswer(question.id);
                });
                
                // 添加回车键检查功能
                inputElement.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        checkAnswer(question.id);
                    }
                });
            });
        }

        // 处理答案输入
        function handleAnswerInput(event) {
            const inputElement = event.target;
            const questionId = inputElement.dataset.questionId;
            const userAnswer = inputElement.value.trim();
            
            // 保存用户答案
            userAnswers[questionId] = userAnswer;
            
            // 更新分数
            updateScore();
        }

        // 检查答案
        function checkAnswer(questionId) {
            const question = questions.find(q => q.id == questionId);
            if (!question) return;
            
            const userAnswer = userAnswers[questionId] || '';
            const isCorrect = userAnswer.toLowerCase() === question.answer.toLowerCase();
            const feedbackElement = document.getElementById(`feedback-${questionId}`);
            const inputElement = document.getElementById(`answer-${questionId}`);
            const questionElement = inputElement.closest('.question');
            const statusElement = questionElement.querySelector('.question-status');
            
            // 更新反馈
            if (userAnswer) {
                feedbackElement.textContent = isCorrect ? 
                    `正确！` : 
                    `错误。正确答案是: ${question.answer}`;
                feedbackElement.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
                feedbackElement.style.display = 'block';
                inputElement.style.borderColor = isCorrect ? '#4CAF50' : '#f44336';
                
                // 更新问题状态
                questionElement.classList.remove('answered-correct', 'answered-incorrect');
                questionElement.classList.add(isCorrect ? 'answered-correct' : 'answered-incorrect');
                
                // 更新状态指示器
                statusElement.className = `question-status ${isCorrect ? 'status-correct' : 'status-incorrect'}`;
            } else {
                feedbackElement.style.display = 'none';
                inputElement.style.borderColor = '#ddd';
            }
            
            // 更新分数
            updateScore();
        }

        // 更新分数
        function updateScore() {
            const filteredQuestions = questions.filter(question => {
                const categoryMatch = currentCategory === 'all' || question.category === currentCategory;
                const tenseMatch = currentTense === 'all' || 
                    (currentTense === 'present' && question.category === 'present') ||
                    (currentTense === 'past' && question.category === 'past') ||
                    (currentTense === 'future' && question.category === 'future') ||
                    (currentTense === 'present-continuous' && question.category === 'present-continuous') ||
                    (currentTense === 'past-continuous' && question.category === 'past-continuous') ||
                    (currentTense === 'present-perfect' && question.category === 'present-perfect') ||
                    (currentTense === 'past-perfect' && question.category === 'past-perfect');
                const difficultyMatch = currentDifficulty === 'all' || question.difficulty === currentDifficulty;
                
                return categoryMatch && tenseMatch && difficultyMatch;
            });
            
            let correctCount = 0;
            let incorrectCount = 0;
            let unansweredCount = 0;
            
            filteredQuestions.forEach(question => {
                const userAnswer = userAnswers[question.id];
                if (!userAnswer) {
                    unansweredCount++;
                } else if (userAnswer.toLowerCase() === question.answer.toLowerCase()) {
                    correctCount++;
                } else {
                    incorrectCount++;
                }
            });
            
            const totalCount = filteredQuestions.length;
            const percentage = totalCount > 0 ? (correctCount / totalCount) * 100 : 0;
            
            // 更新UI
            scoreValue.textContent = `${correctCount}/${totalCount}`;
            progressBar.style.width = `${percentage}%`;
            correctCountEl.textContent = correctCount;
            incorrectCountEl.textContent = incorrectCount;
            unansweredCountEl.textContent = unansweredCount;
        }

        // 重置答题
        function resetQuiz() {
            userAnswers = {};
            renderQuestions();
            updateScore();
        }

        // 初始化应用
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
