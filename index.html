<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>英语时态练习 (200题)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#6B7280',
                        success: '#10B981',
                        danger: '#EF4444',
                        warning: '#F59E0B',
                        light: '#F3F4F6',
                        dark: '#1F2937'
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .card-shadow {
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            }
            .btn-hover {
                transition: all 0.2s ease-in-out;
            }
            .btn-hover:hover {
                transform: translateY(-2px);
            }
            .progress-bar {
                transition: width 0.5s ease-in-out;
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-inter text-dark">
    <div class="min-h-screen flex flex-col">
        <!-- 顶部导航栏 -->
        <header class="bg-white shadow-md">
            <div class="container mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center mb-4 md:mb-0">
                    <i class="fa-solid fa-book-open text-primary text-3xl mr-3"></i>
                    <h1 class="text-2xl font-bold text-dark">英语时态练习 <span class="text-primary">(200题)</span></h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-center">
                        <div class="text-sm text-secondary">当前进度</div>
                        <div class="text-xl font-bold" id="progress-text">0/0</div>
                    </div>
                    <div class="w-32 h-2 bg-gray-200 rounded-full overflow-hidden">
                        <div id="progress-bar" class="progress-bar h-full bg-primary w-0"></div>
                    </div>
                    <div class="text-center">
                        <div class="text-sm text-secondary">正确率</div>
                        <div class="text-xl font-bold text-success" id="accuracy-text">0%</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- 主内容区 -->
        <main class="flex-grow container mx-auto px-4 py-8">
            <!-- 分类选择 -->
            <div class="bg-white rounded-xl p-6 mb-8 shadow-md">
                <h2 class="text-xl font-semibold mb-4">选择时态分类</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="category-list">
                    <!-- 分类按钮将通过JavaScript动态生成 -->
                </div>
            </div>

            <!-- 题目卡片 -->
            <div id="question-container" class="max-w-3xl mx-auto">
                <!-- 初始提示 -->
                <div id="initial-prompt" class="bg-white rounded-xl p-8 text-center shadow-md">
                    <i class="fa-solid fa-arrow-up text-4xl text-gray-300 mb-4"></i>
                    <h3 class="text-xl font-medium text-gray-500">请从上方选择一个时态分类开始练习</h3>
                </div>

                <!-- 题目内容 (默认隐藏) -->
                <div id="question-card" class="bg-white rounded-xl overflow-hidden shadow-md hidden">
                    <div class="bg-primary text-white p-4">
                        <div class="flex justify-between items-center">
                            <span id="current-category" class="font-medium"></span>
                            <span id="current-question-count" class="font-medium"></span>
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 id="question-text" class="text-xl font-semibold mb-6"></h3>
                        <div id="options-container" class="space-y-3 mb-6">
                            <!-- 选项将通过JavaScript动态生成 -->
                        </div>
                        <button id="next-btn" class="btn-hover bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg shadow-md hidden">
                            下一题 <i class="fa-solid fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                    <!-- 答案解析 (默认隐藏) -->
                    <div id="explanation-container" class="bg-gray-50 p-6 border-t border-gray-200 hidden">
                        <h4 class="font-semibold text-lg mb-2 flex items-center">
                            <i id="explanation-icon" class="mr-2"></i>
                            <span id="explanation-title"></span>
                        </h4>
                        <p id="correct-answer" class="mb-2 font-medium"></p>
                        <p id="explanation-text"></p>
                    </div>
                </div>
            </div>
        </main>

        <!-- 页脚 -->
        <footer class="bg-dark text-white py-6">
            <div class="container mx-auto px-4 text-center">
                <p>英语时态练习 (200题) - 祝您学习愉快！</p>
            </div>
        </footer>
    </div>

    <script>
        // 题目数据
        const questionData = {
            "一般现在时": [
                { question: "He ______ (play) basketball every Saturday.", answer: "plays", options: ["play", "plays", "played", "is playing"], explanation: "第三人称单数，标志词every Saturday" },
                { question: "We ______ (not watch) TV in the morning.", answer: "don't watch", options: ["not watch", "doesn't watch", "don't watch", "didn't watch"], explanation: "否定式，主语复数" },
                { question: "My mother always ______ (cook) delicious food.", answer: "cooks", options: ["cook", "cooks", "cooked", "is cooking"], explanation: "第三人称单数，标志词always" },
                { question: "______ you ______ (like) coffee?", answer: "Do; like", options: ["Do; like", "Does; like", "Are; like", "Did; like"], explanation: "一般疑问句，主语第二人称" },
                { question: "The earth ______ (go) around the sun.", answer: "goes", options: ["go", "goes", "went", "is going"], explanation: "客观真理，用一般现在时" },
                { question: "They ______ (study) English twice a week.", answer: "study", options: ["study", "studies", "studied", "are studying"], explanation: "主语复数，标志词twice a week" },
                { question: "Tom ______ (not finish) his homework late.", answer: "doesn't finish", options: ["not finish", "doesn't finish", "don't finish", "didn't finish"], explanation: "否定式，第三人称单数" },
                { question: "She ______ (be) a doctor.", answer: "is", options: ["is", "are", "was", "were"], explanation: "主谓一致，主语she" },
                { question: "The train ______ (leave) at 7:00 a.m. every day.", answer: "leaves", options: ["leave", "leaves", "left", "is leaving"], explanation: "表时刻表，用一般现在时" },
                { question: "Birds ______ (fly) south in winter.", answer: "fly", options: ["fly", "flies", "flew", "are flying"], explanation: "主语复数，客观事实" }
            ],
            "一般过去时": [
                { question: "I ______ (go) to the park yesterday.", answer: "went", options: ["go", "goes", "went", "gone"], explanation: "标志词yesterday，不规则动词" },
                { question: "She ______ (not eat) breakfast this morning.", answer: "didn't eat", options: ["not eat", "doesn't eat", "don't eat", "didn't eat"], explanation: "否定式，标志词this morning表过去" },
                { question: "They ______ (see) a movie last night.", answer: "saw", options: ["see", "sees", "saw", "seen"], explanation: "不规则动词，标志词last night" },
                { question: "______ he ______ (visit) his uncle last week?", answer: "Did; visit", options: ["Do; visit", "Does; visit", "Did; visit", "Was; visiting"], explanation: "一般疑问句，标志词last week" },
                { question: "We ______ (have) a party yesterday evening.", answer: "had", options: ["have", "has", "had", "having"], explanation: "不规则动词，标志词yesterday evening" }
            ],
            "一般将来时": [
                { question: "I ______ (visit) my grandparents next Sunday.", answer: "will visit", options: ["visit", "visited", "will visit", "am visiting"], explanation: "标志词next Sunday" },
                { question: "She ______ (not go) to the party tomorrow.", answer: "won't go", options: ["not go", "doesn't go", "won't go", "didn't go"], explanation: "否定式，标志词tomorrow" },
                { question: "______ you ______ (see) the film this weekend?", answer: "Will; see", options: ["Do; see", "Did; see", "Will; see", "Are; seeing"], explanation: "一般疑问句，标志词this weekend" },
                { question: "They ______ (have) a meeting at 3:00 p.m. tomorrow.", answer: "will have", options: ["have", "had", "will have", "are having"], explanation: "标志词tomorrow" },
                { question: "The train ______ (arrive) in 10 minutes.", answer: "will arrive", options: ["arrive", "arrives", "arrived", "will arrive"], explanation: "标志词in 10 minutes" }
            ],
            "现在进行时": [
                { question: "Look! They ______ (play) football on the playground.", answer: "are playing", options: ["play", "plays", "are playing", "played"], explanation: "标志词Look!，现在进行时结构：am/is/are + doing" },
                { question: "I ______ (not study) now; I'm resting.", answer: "am not studying", options: ["not study", "don't study", "am not studying", "wasn't studying"], explanation: "标志词now" },
                { question: "She ______ (cook) dinner in the kitchen at the moment.", answer: "is cooking", options: ["cook", "cooks", "is cooking", "cooked"], explanation: "标志词at the moment" },
                { question: "______ you ______ (watch) TV now?", answer: "Are; watching", options: ["Do; watch", "Did; watch", "Are; watching", "Will; watch"], explanation: "一般疑问句，标志词now" },
                { question: "It ______ (rain) outside. Take an umbrella.", answer: "is raining", options: ["rain", "rains", "is raining", "rained"], explanation: "语境提示：正在下雨" }
            ],
            "过去进行时": [
                { question: "At 8:00 last night, I ______ (watch) TV.", answer: "was watching", options: ["watch", "watched", "was watching", "will watch"], explanation: "标志词At 8:00 last night，过去进行时结构：was/were + doing" },
                { question: "She ______ (not study) when her mother came back.", answer: "wasn't studying", options: ["not study", "didn't study", "wasn't studying", "isn't studying"], explanation: "否定式，when引导的时间状语从句，主句用过去进行时" },
                { question: "They ______ (play) football at this time yesterday.", answer: "were playing", options: ["play", "played", "were playing", "are playing"], explanation: "标志词at this time yesterday" },
                { question: "______ he ______ (read) a book when you called him?", answer: "Was; reading", options: ["Do; read", "Did; read", "Was; reading", "Is; reading"], explanation: "一般疑问句，when引导的从句用一般过去时" },
                { question: "We ______ (have) dinner when the phone rang.", answer: "were having", options: ["have", "had", "were having", "will have"], explanation: "when引导的从句用一般过去时，主句用过去进行时" }
            ],
            "现在完成时": [
                { question: "I ______ (finish) my homework already.", answer: "have finished", options: ["finish", "finished", "have finished", "will finish"], explanation: "标志词already，现在完成时结构：have/has + done" },
                { question: "She ______ (not see) that film yet.", answer: "hasn't seen", options: ["not see", "doesn't see", "hasn't seen", "didn't see"], explanation: "标志词yet，第三人称单数" },
                { question: "They ______ (live) in Beijing for 5 years.", answer: "have lived", options: ["live", "lived", "have lived", "are living"], explanation: "标志词for 5 years，表持续" },
                { question: "______ you ______ (visit) the Great Wall before?", answer: "Have; visited", options: ["Do; visit", "Did; visit", "Have; visited", "Will; visit"], explanation: "一般疑问句，标志词before" },
                { question: "He ______ (study) English since 2018.", answer: "has studied", options: ["study", "studies", "has studied", "studied"], explanation: "标志词since 2018，第三人称单数" }
            ],
            "过去完成时": [
                { question: "By the time I arrived, they ______ (leave) already.", answer: "had left", options: ["leave", "left", "had left", "will leave"], explanation: "标志词By the time，过去完成时结构：had + done，表“过去的过去”" },
                { question: "She ______ (not finish) her homework before her mother came back.", answer: "hadn't finished", options: ["not finish", "didn't finish", "hadn't finished", "wasn't finishing"], explanation: "否定式，before引导的从句用一般过去时，主句用过去完成时" },
                { question: "They ______ (live) in Beijing for 5 years before they moved to Shanghai.", answer: "had lived", options: ["live", "lived", "had lived", "have lived"], explanation: "标志词for 5 years + before从句，表过去持续到过去某个时间" },
                { question: "______ he ______ (read) the book before he saw the film?", answer: "Had; read", options: ["Do; read", "Did; read", "Had; read", "Has; read"], explanation: "一般疑问句，before引导的从句用一般过去时" },
                { question: "He ______ (study) English for 3 years before he went abroad.", answer: "had studied", options: ["study", "studied", "has studied", "had studied"], explanation: "标志词for 3 years + before从句，第三人称单数" }
            ],
            "将来完成时": [
                { question: "By next year, I ______ (finish) my college studies.", answer: "will have finished", options: ["finish", "will finish", "will have finished", "have finished"], explanation: "标志词By next year，将来完成时结构：will have + done，表“将来某个时间前完成的动作”" },
                { question: "She ______ (not write) the book by the end of this month.", answer: "won't have written", options: ["not write", "doesn't write", "won't have written", "hasn't written"], explanation: "否定式，标志词by the end of this month" },
                { question: "They ______ (live) in Beijing for 10 years by 2025.", answer: "will have lived", options: ["live", "will live", "will have lived", "have lived"], explanation: "标志词for 10 years + by 2025，表持续到将来" },
                { question: "______ he ______ (read) all the books by next week?", answer: "Will; have read", options: ["Do; read", "Will; read", "Will; have read", "Has; read"], explanation: "一般疑问句，标志词by next week" },
                { question: "We ______ (have) 10 meetings by the end of this year.", answer: "will have had", options: ["have", "will have", "will have had", "had had"], explanation: "标志词by the end of this year" }
            ]
        };

        // DOM 元素
        const categoryListElement = document.getElementById('category-list');
        const initialPromptElement = document.getElementById('initial-prompt');
        const questionCardElement = document.getElementById('question-card');
        const currentCategoryElement = document.getElementById('current-category');
        const currentQuestionCountElement = document.getElementById('current-question-count');
        const questionTextElement = document.getElementById('question-text');
        const optionsContainerElement = document.getElementById('options-container');
        const nextBtnElement = document.getElementById('next-btn');
        const explanationContainerElement = document.getElementById('explanation-container');
        const explanationIconElement = document.getElementById('explanation-icon');
        const explanationTitleElement = document.getElementById('explanation-title');
        const correctAnswerElement = document.getElementById('correct-answer');
        const explanationTextElement = document.getElementById('explanation-text');
        const progressTextElement = document.getElementById('progress-text');
        const progressBarElement = document.getElementById('progress-bar');
        const accuracyTextElement = document.getElementById('accuracy-text');

        // 全局状态
        let currentCategory = null;
        let currentQuestionIndex = -1;
        let questions = [];
        let userAnswers = [];
        let correctCount = 0;

        // 初始化分类列表
        function initCategories() {
            for (const category in questionData) {
                const button = document.createElement('button');
                button.className = 'btn-hover bg-white hover:bg-primary hover:text-white text-dark font-medium py-2 px-4 rounded-lg border border-gray-300 shadow-sm transition-all duration-300';
                button.innerHTML = `<i class="fa-solid fa-list-ul mr-2"></i>${category}`;
                button.addEventListener('click', () => startCategory(category));
                categoryListElement.appendChild(button);
            }
        }

        // 开始一个新的分类
        function startCategory(category) {
            currentCategory = category;
            questions = [...questionData[category]]; // 复制题目数组，避免修改原始数据
            currentQuestionIndex = -1;
            userAnswers = [];
            correctCount = 0;
            
            // 更新UI
            initialPromptElement.classList.add('hidden');
            questionCardElement.classList.remove('hidden');
            currentCategoryElement.textContent = category;
            
            updateProgress();
            loadNextQuestion();
        }

        // 加载下一题
        function loadNextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < questions.length) {
                const question = questions[currentQuestionIndex];
                
                // 更新题目信息
                currentQuestionCountElement.textContent = `第 ${currentQuestionIndex + 1}/${questions.length} 题`;
                questionTextElement.textContent = question.question;
                
                // 生成选项
                optionsContainerElement.innerHTML = '';
                question.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option btn-hover p-3 border border-gray-300 rounded-lg cursor-pointer transition-all duration-200 hover:border-primary hover:bg-primary/5';
                    optionElement.innerHTML = `
                        <span class="inline-block w-6 h-6 text-center mr-2 border border-gray-300 rounded-full">${String.fromCharCode(65 + index)}</span>
                        <span>${option}</span>
                    `;
                    optionElement.dataset.answer = option;
                    optionElement.addEventListener('click', () => checkAnswer(option));
                    optionsContainerElement.appendChild(optionElement);
                });
                
                // 重置UI状态
                nextBtnElement.classList.add('hidden');
                explanationContainerElement.classList.add('hidden');
                optionsContainerElement.querySelectorAll('.option').forEach(option => {
                    option.classList.remove('bg-success', 'bg-danger', 'bg-primary/10', 'border-success', 'border-danger', 'border-primary');
                    option.style.pointerEvents = 'auto'; // 重新启用选项点击
                });

            } else {
                // 完成所有题目
                questionTextElement.innerHTML = `<i class="fa-solid fa-flag-checkered text-2xl text-primary mr-2"></i>恭喜！你已完成所有题目！`;
                optionsContainerElement.innerHTML = `
                    <div class="bg-success/10 border border-success text-success p-4 rounded-lg text-center">
                        <p class="text-xl font-bold">正确率: ${Math.round((correctCount / questions.length) * 100)}%</p>
                        <p class="mt-2">答对: ${correctCount} / 答错: ${questions.length - correctCount}</p>
                    </div>
                `;
                nextBtnElement.innerHTML = `<i class="fa-solid fa-redo mr-2"></i>重新练习`;
                nextBtnElement.onclick = () => startCategory(currentCategory);
                nextBtnElement.classList.remove('hidden');
            }
        }

        // 检查答案
        function checkAnswer(userAnswer) {
            const question = questions[currentQuestionIndex];
            const isCorrect = userAnswer === question.answer;
            
            // 记录答案
            userAnswers.push(userAnswer);
            if (isCorrect) correctCount++;
            
            // 更新选项UI
            const options = optionsContainerElement.querySelectorAll('.option');
            options.forEach(option => {
                const optionAnswer = option.dataset.answer;
                option.style.pointerEvents = 'none'; // 禁用所有选项点击
                
                if (optionAnswer === question.answer) {
                    option.classList.add('bg-success', 'border-success');
                } else if (optionAnswer === userAnswer && !isCorrect) {
                    option.classList.add('bg-danger', 'border-danger');
                }
            });
            
            // 显示解析
            explanationContainerElement.classList.remove('hidden');
            if (isCorrect) {
                explanationIconElement.className = 'fa-solid fa-check-circle text-success';
                explanationTitleElement.textContent = '回答正确!';
                explanationTitleElement.className = 'text-success';
            } else {
                explanationIconElement.className = 'fa-solid fa-times-circle text-danger';
                explanationTitleElement.textContent = '回答错误';
                explanationTitleElement.className = 'text-danger';
            }
            correctAnswerElement.textContent = `正确答案: ${question.answer}`;
            explanationTextElement.textContent = question.explanation;
            
            // 显示下一题按钮
            nextBtnElement.classList.remove('hidden');
            nextBtnElement.onclick = loadNextQuestion;
            
            // 更新进度
            updateProgress();
        }

        // 更新进度信息
        function updateProgress() {
            const totalAnswered = userAnswers.length;
            const totalQuestions = questions.length || 0;
            const accuracy = totalAnswered > 0 ? Math.round((correctCount / totalAnswered) * 100) : 0;
            
            progressTextElement.textContent = `${totalAnswered}/${totalQuestions}`;
            progressBarElement.style.width = `${totalAnswered / totalQuestions * 100}%`;
            accuracyTextElement.textContent = `${accuracy}%`;
        }

        // 初始化应用
        function initApp() {
            initCategories();
        }

        // 当页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
